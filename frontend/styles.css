* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: #1a1a1a; color: white; height: 100vh; overflow: hidden;
}

/* 로그인 */
.login-container { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #1a1a1a; }
.logo { width: 75px; height: 75px; background: linear-gradient(135deg, #7f52ea, #dd41b6); border-radius: 20px; display: flex; align-items: center; justify-content: center; margin-bottom: 25px; }
.logo img { width: 100%; height: 100%; object-fit: contain; padding: 5%; }
.brand-title { font-size: 66px; font-weight: bolder; margin-bottom: 0px; font-family: 'Bitcount Single Ink', sans-serif; }
.brand-subtitle { color: #888; font-size: 16px; margin-bottom: 50px; }
.features { display: flex; gap: 60px; margin-bottom: 60px; }
.feature { display: flex; flex-direction: column; align-items: center; gap: 10px; }
.feature-icon { width: 60px; height: 60px; border-radius: 50% !important; overflow: hidden; display: flex; align-items: center; justify-content: center; }
.feature-icon img { max-width: 90%; max-height: 90%; object-fit: contain; }
.feature-icon.realtime { background: rgba(221, 65, 182, 0.2); box-shadow: 0 0 10px #dd41b6, 0 0 20px #ff4fdc; }
.feature-icon.reaction { background: rgba(174, 74, 208, 0.2); box-shadow: 0 0 10px #ae4ad0, 0 0 20px #c966ff; }
.feature-icon.mention { background: rgba(127, 82, 234, 0.2); box-shadow: 0 0 10px #7f52ea, 0 0 20px #956aff; }
.feature-label { color: #ccc; font-size: 14px; }
.login-form { display: flex; flex-direction: column; gap: 20px; width: 400px; }
.form-title { font-size: 30px; text-align: center; font-weight: normal; margin-top: 10px; }
.form-subtitle { color: #888; text-align: center; }
.nickname-input { width: 100%; padding: 16px; background: #333; border: 2px solid #444; border-radius: 8px; color: white; font-size: 16px; outline: none; }
.nickname-input:focus { border-color: #8b5cf6; }
.nickname-input.error { border-color: #dc2626; }
.join-btn { width: 100%; padding: 16px; background: linear-gradient(135deg, #dd41b6, #7f52ea); border: none; border-radius: 8px; color: white; font-size: 18px; cursor: pointer; }
.join-btn:hover { opacity: 0.9; }
.footer-text { color: #666; font-size: 14px; margin-top: 40px; }
.error-message { color: #dc2626; font-size: 14px; display: none; }

/* 채팅 */
.chat-container { display: none; height: 100vh; flex-direction: column; }
.chat-header { background: #2a2a2a; padding: 12px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #444; }
.header-left { display: flex; align-items: center; gap: 12px; }
.header-logo { width: 32px; height: 32px; background: linear-gradient(135deg, #7f52ea, #dd41b6); border-radius: 8px; display: flex; align-items: center; justify-content: center; }
.header-title { font-size: 18px; font-weight: bold; }
.connection-status { display: flex; align-items: center; gap: 6px; color: #16a34a; font-size: 14px; }
.status-dot { width: 8px; height: 8px; border-radius: 50%; background: #16a34a; }
.header-right { display: flex; align-items: center; gap: 12px; }

/* 버튼들: 같은 라인/크기 */
.leave-btn,
.sidebar-toggle-btn {
  background: #444; /* leave-btn은 아래에서 red로 덮어씀 */
  border: none; border-radius: 20px;
  padding: 6px 10px; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: background 0.2s;
}
.leave-btn { background: #dc2626; }
.leave-btn:hover { background: #b91c1c; }
.sidebar-toggle-btn:hover { background: #555; }

.leave-btn img,
.sidebar-toggle-btn img {
  width: 29px; height: 29px; object-fit: contain; display: block;
}

/* 본문 레이아웃 */
.chat-main { flex: 1; display: flex; overflow: hidden; position: relative; }
.chat-messages { flex: 1; display: flex; flex-direction: column; }
.messages-container { flex: 1; overflow-y: auto; padding: 20px; background: #1a1a1a; }

/* 입력창 */
.input-container { padding: 20px; background: #2a2a2a; border-top: 1px solid #444; }
.input-wrapper { display: flex; gap: 12px; align-items: flex-end; }
.message-input { flex: 1; padding: 12px 16px; background: #333; border: 1px solid #444; border-radius: 8px; color: white; resize: none; max-height: 120px; min-height: 44px; }
.message-input:focus { border-color: #8b5cf6; }
.input-actions { display: flex; gap: 8px; }
.action-btn { width: 44px; height: 44px; border: none; border-radius: 8px; background: #444; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; }
.send-btn { background: linear-gradient(135deg, #7f52ea, #dd41b6); }
.input-hint { color: #666; font-size: 12px; margin-top: 8px; }

/* 메시지/말풍선 */
.message { margin-bottom: 20px; display: flex; gap: 12px; position: relative; }
.message.own { flex-direction: row-reverse; }
.message-content { flex: 1; min-width: 0; display: flex; flex-direction: column; position: relative; }
.message.own .message-content { align-items: flex-end; }
.message-header { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; }
.message-author { font-weight: bold; color: #ccc; }
.message-time { color: #666; font-size: 12px; }
.message-text-wrapper { position: relative; width: fit-content; max-width: 100%; display: inline-block; }
.message-text { background: #333; padding: 12px 16px; border-radius: 12px; word-wrap: break-word; line-height: 1.4; display: inline-block; max-width: 480px; }
.message.own .message-text { background: linear-gradient(135deg, #7f52ea, #dd41b6); color: #fff; }

/* 리액션 */
.chat-reaction-row { position: absolute; right: 0; bottom: -44px; display: flex; align-items: center; gap: 8px; z-index: 5; }
.chat-reaction-hover-box { display: flex; gap: 6px; opacity: 0; pointer-events: none; transform: translateY(8px); transition: opacity .18s ease, transform .18s ease; }
.message-text-wrapper:hover .chat-reaction-hover-box { opacity: 1; pointer-events: auto; transform: translateY(0); }
.chat-reaction-option { width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center; cursor: pointer; transform: scale(0.8); opacity: 0; transition: transform .12s ease; }
.message-text-wrapper:hover .chat-reaction-option { opacity: 1; transform: scale(1); }
.message-text-wrapper:hover .chat-reaction-option:nth-child(1) { animation: popIn .18s both .00s; }
.message-text-wrapper:hover .chat-reaction-option:nth-child(2) { animation: popIn .18s both .06s; }
.message-text-wrapper:hover .chat-reaction-option:nth-child(3) { animation: popIn .18s both .12s; }
@keyframes popIn { from { transform: scale(.6); opacity: 0; } to { transform: scale(1); opacity: 1; } }
.chat-reaction-option img { width: 20px; height: 20px; object-fit: contain; display: block; }
.chat-reaction-option.like    { background: #16a34a; }
.chat-reaction-option.dislike { background: #2563eb; }
.chat-reaction-option.heart   { background: #e11d48; }
.chat-reaction-option:hover { transform: scale(1.12); }
.chat-reactions { display: flex; gap: 6px; }
.chat-reaction-pill {display:inline-flex;align-items:center;gap:6px;padding:2px 10px;border-radius:18px;color:#fff;height:28px;font-size:13px;line-height:1;}
.chat-reaction-pill.like {border:1px solid #16a34a;background:rgba(22,163,74,0.2);}
.chat-reaction-pill.dislike {border:1px solid #2563eb;background:rgba(37,99,235,0.2);}
.chat-reaction-pill.heart {border:1px solid #e11d48;background:rgba(225,29,72,0.2);}
.chat-reaction-pill img { width: 16px; height: 16px; object-fit: contain; display: block; }
.chat-reaction-pill span { font-size: 13px; line-height: 1; }

/* (새 코드) 사이드바 = flex item */
.sidebar {
  width: 280px;
  background: #2a2a2a;
  border-left: 1px solid #444;
  padding: 20px;
  overflow-y: auto;
  transition: width 0.3s ease, opacity 0.3s ease, padding 0.3s ease;
}

.sidebar.hidden {
  width: 0;
  opacity: 0;
  padding: 0;
  border: none;
}

.sidebar-section { margin-bottom: 24px; }
.sidebar-title { display: flex; align-items: center; gap: 8px; font-weight: bold; margin-bottom: 12px; color: #ccc; }
.user-count {background:#16a34a;color:#fff;padding:0 8px;border-radius:999px;font-size:12px;font-weight:500;display:inline-flex;align-items:center;justify-content:center;min-width:22px;height:16px;line-height:1;}
.user-list { display: flex; flex-direction: column; }
.user-item { display: flex; align-items: center; gap: 16px; padding: 12px 12px; border-radius: 8px; transition: background-color 0.2s; border-bottom: 1px solid #444; }
.user-item:last-child { border-bottom: none; }
.user-item:hover { background: #333; }
.user-item.current { background: rgba(139, 92, 246, 0.2); }
.user-name { font-weight: 500; color: #ccc; }

/* 스크롤바 & 반응형 */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: #333; }
::-webkit-scrollbar-thumb { background: #666; border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: #888; }

@media (max-width: 768px) {
  /* 모바일에서도 토글로 열고 닫을 수 있게 display:none 제거 */
  .login-form { width: 300px; }
  .features { gap: 30px; }
}
